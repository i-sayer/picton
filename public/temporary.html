<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <ul id="uroot">
        <li id="cl_6026545" class="menuItem catlink"><span class="ptExpCol"><img
                    src="images/icons/tree/minus.png"></span><span id="pti_cl_6026545" class="ptIcon"><img
                    src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6026545"
                class="ptLabel">GENERAL</span><span class="ptAdditional"></span>
            <ul>
                <li id="cl_6250583" class="menuItem catlink"><span class="ptExpCol"><img
                            src="images/icons/tree/minus.png"></span><span id="pti_cl_6250583" class="ptIcon"><img
                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6250583"
                        class="ptLabel">AMRF
                        MSLC Database</span><span class="ptAdditional"></span>
                    <ul>
                        <li id="cl_6250588" class="menuItem catlink"><span class="ptExpCol"><img
                                    src="images/icons/tree/minus.png"></span><span id="pti_cl_6250588"
                                class="ptIcon"><img src="images/icons/tree/cat_category.gif"></span><span
                                id="lbl_cl_6250588" class="ptLabel">Pathology Collection</span><span
                                class="ptAdditional"></span>
                            <ul>
                                <li id="cl_6135347" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6135347" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6135347"
                                        class="ptLabel">Musculoskeletal System</span><span class="ptAdditional"></span>
                                </li>
                                <li id="cl_6140947" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6140947" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6140947"
                                        class="ptLabel">Cardiovascular System</span><span class="ptAdditional"></span>
                                </li>
                                <li id="cl_6142197" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6142197" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6142197"
                                        class="ptLabel">Respiratory System</span><span class="ptAdditional"></span></li>
                                <li id="cl_6143102" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6143102" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6143102"
                                        class="ptLabel">Gastrointestinal System</span><span class="ptAdditional"></span>
                                </li>
                                <li id="cl_6159350" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6159350" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6159350"
                                        class="ptLabel">Genitourinary System (including Obstetrics)</span><span
                                        class="ptAdditional"></span></li>
                                <li id="cl_6168255" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6168255" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6168255"
                                        class="ptLabel">Haematology and Immunology</span><span
                                        class="ptAdditional"></span>
                                </li>
                                <li id="cl_6168932" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6168932" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6168932"
                                        class="ptLabel">Forensic / Miscellaneous</span><span
                                        class="ptAdditional"></span>
                                </li>
                                <li id="cl_6179570" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6179570" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6179570"
                                        class="ptLabel">Nervous System</span><span class="ptAdditional"></span></li>
                                <li id="cl_6189734" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6189734" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6189734"
                                        class="ptLabel">Endocrine System</span><span class="ptAdditional"></span></li>
                                <li id="cl_6250839" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6250839" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6250839"
                                        class="ptLabel">Skin, Soft Tissue and Breast</span><span
                                        class="ptAdditional"></span></li>
                            </ul>
                        </li>
                        <li id="cl_6250607" class="menuItem catlink"><span class="ptExpCol"><img
                                    src="images/icons/tree/minus.png"></span><span id="pti_cl_6250607"
                                class="ptIcon"><img src="images/icons/tree/cat_category.gif"></span><span
                                id="lbl_cl_6250607" class="ptLabel">Radiology Images</span><span
                                class="ptAdditional"></span>
                            <ul style="">
                                <li id="cl_6184908" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6184908" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6184908"
                                        class="ptLabel">Head &amp; Neck</span><span class="ptAdditional"></span></li>
                                <li id="cl_6185948" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6185948" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6185948"
                                        class="ptLabel">Thorax</span><span class="ptAdditional"></span></li>
                                <li id="cl_6187148" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6187148" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6187148"
                                        class="ptLabel">Abdomen</span><span class="ptAdditional"></span></li>
                                <li id="cl_6187947" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6187947" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6187947"
                                        class="ptLabel">Back</span><span class="ptAdditional"></span></li>
                                <li id="cl_6188214" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6188214" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6188214"
                                        class="ptLabel">Upper Limb</span><span class="ptAdditional"></span></li>
                                <li id="cl_6188913" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6188913" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6188913"
                                        class="ptLabel">Lower Limb</span><span class="ptAdditional"></span></li>
                                <li id="cl_6193437" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6193437" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6193437"
                                        class="ptLabel">Pelvis</span><span class="ptAdditional"></span></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li id="cl_6297523" class="menuItem catlink"><span class="ptExpCol">
                        <div></div><img src="sml_space.png">
                    </span><span id="pti_cl_6297523" class="ptIcon"><img
                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6297523"
                        class="ptLabel">Research</span><span class="ptAdditional"></span></li>
                <li id="cl_6265815" class="menuItem catlink"><span class="ptExpCol"><img
                            src="images/icons/tree/minus.png"></span><span id="pti_cl_6265815" class="ptIcon"><img
                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6265815"
                        class="ptLabel">Virtual Slide Database</span><span class="ptAdditional"></span>
                    <ul>
                        <li id="cl_6286985" class="menuItem catlink"><span class="ptExpCol"><img
                                    src="images/icons/tree/minus.png"></span><span id="pti_cl_6286985"
                                class="ptIcon"><img src="images/icons/tree/cat_category.gif"></span><span
                                id="lbl_cl_6286985" class="ptLabel">Human Histopath Atlas</span><span
                                class="ptAdditional"></span>
                            <ul>
                                <li id="cl_6286986" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6286986" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6286986"
                                        class="ptLabel">Cardiovascular</span><span class="ptAdditional"></span></li>
                                <li id="cl_6286989" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6286989" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6286989"
                                        class="ptLabel">Endocrine</span><span class="ptAdditional"></span></li>
                                <li id="cl_6286990" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6286990" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6286990"
                                        class="ptLabel">Forensic / Miscellaneous</span><span
                                        class="ptAdditional"></span>
                                </li>
                                <li id="cl_6286987" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6286987" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6286987"
                                        class="ptLabel">Gastrointestinal system</span><span class="ptAdditional"></span>
                                </li>
                                <li id="cl_6286988" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6286988" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6286988"
                                        class="ptLabel">Genitourinary system including Obstetrics</span><span
                                        class="ptAdditional"></span></li>
                                <li id="cl_6286992" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6286992" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6286992"
                                        class="ptLabel">Haematology and Immunology</span><span
                                        class="ptAdditional"></span>
                                </li>
                                <li id="cl_6286993" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6286993" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6286993"
                                        class="ptLabel">Musculoskeletal</span><span class="ptAdditional"></span></li>
                                <li id="cl_6286991" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6286991" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6286991"
                                        class="ptLabel">Nervous</span><span class="ptAdditional"></span></li>
                                <li id="cl_6286994" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6286994" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6286994"
                                        class="ptLabel">Respiratory</span><span class="ptAdditional"></span></li>
                                <li id="cl_6286995" class="menuItem catlink"><span class="ptExpCol">
                                        <div></div><img src="sml_space.png">
                                    </span><span id="pti_cl_6286995" class="ptIcon"><img
                                            src="images/icons/tree/cat_category.gif"></span><span id="lbl_cl_6286995"
                                        class="ptLabel">Skin, soft tissue and breast</span><span
                                        class="ptAdditional"></span></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    <script>
        /*

for ul of uls
        for li of ul
            id = span.ptLabel.id, text = span.ptLabel.textContent

        */
        debugger;
        var groups = [];
        const allGroups = Array.from(uroot.querySelectorAll("ul")).filter(ul => !ul.id);
        allGroups.forEach(u => {
            // extract top level leaf nodes
            group = Object.assign({ leaf: [] });
            for (leaf of u.children) {
                let span = leaf.querySelector("span.ptLabel");
                if (span)
                    group.leaf.push({ id: span.id, name: span.textContent });
            }
            groups.push(group);
        });
        let str = JSON.stringify(groups);

            [
    {
        "id":"root", "name":"General",
        "leafs":[
            {
                "id":"lbl_cl_6250583",
                "name":"AMRF MSLC Database",
                "leafs":[
                    {
                        "id":"lbl_cl_6250588",
                        "name":"Pathology Collection",
                        "leafs":[
                            {
                                "id":"lbl_cl_6135347",
                                "name":"Musculoskeletal System"
                            },
                            {
                                "id":"lbl_cl_6140947",
                                "name":"Cardiovascular System"
                            },
                            {
                                "id":"lbl_cl_6142197",
                                "name":"Respiratory System"
                            },
                            {
                                "id":"lbl_cl_6143102",
                                "name":"Gastrointestinal System"
                            },
                            {
                                "id":"lbl_cl_6159350",
                                "name":"Genitourinary System (including Obstetrics)"
                            },
                            {
                                "id":"lbl_cl_6168255",
                                "name":"Haematology and Immunology"
                            },
                            {
                                "id":"lbl_cl_6168932",
                                "name":"Forensic / Miscellaneous"
                            },
                            {
                                "id":"lbl_cl_6179570",
                                "name":"Nervous System"
                            },
                            {
                                "id":"lbl_cl_6189734",
                                "name":"Endocrine System"
                            },
                            {
                                "id":"lbl_cl_6250839",
                                "name":"Skin, Soft Tissue and Breast"
                            }
                        ]
                    },
                    {
                        "id":"lbl_cl_6250607",
                        "name":"Radiology Images",
                        "leafs":[
                            {
                                "id":"lbl_cl_6184908",
                                "name":"Head & Neck"
                            },
                            {
                                "id":"lbl_cl_6185948",
                                "name":"Thorax"
                            },
                            {
                                "id":"lbl_cl_6187148",
                                "name":"Abdomen"
                            },
                            {
                                "id":"lbl_cl_6187947",
                                "name":"Back"
                            },
                            {
                                "id":"lbl_cl_6188214",
                                "name":"Upper Limb"
                            },
                            {
                                "id":"lbl_cl_6188913",
                                "name":"Lower Limb"
                            },
                            {
                                "id":"lbl_cl_6193437",
                                "name":"Pelvis"
                            }
                        ]
                    }
                ]
            },
            {
                "id":"lbl_cl_6297523",
                "name":"Research"
            },
            {
                "id":"lbl_cl_6265815",
                "name":"Virtual Slide Database",
                "leafs":[
                    {
                        "id":"lbl_cl_6286985",
                        "name":"Human Histopath Atlas",
                        "leafs":[
                            {
                                "id":"lbl_cl_6286986",
                                "name":"Cardiovascular"
                            },
                            {
                                "id":"lbl_cl_6286989",
                                "name":"Endocrine"
                            },
                            {
                                "id":"lbl_cl_6286990",
                                "name":"Forensic / Miscellaneous"
                            },
                            {
                                "id":"lbl_cl_6286987",
                                "name":"Gastrointestinal system"
                            },
                            {
                                "id":"lbl_cl_6286988",
                                "name":"Genitourinary system including Obstetrics"
                            },
                            {
                                "id":"lbl_cl_6286992",
                                "name":"Haematology and Immunology"
                            },
                            {
                                "id":"lbl_cl_6286993",
                                "name":"Musculoskeletal"
                            },
                            {
                                "id":"lbl_cl_6286991",
                                "name":"Nervous"
                            },
                            {
                                "id":"lbl_cl_6286994",
                                "name":"Respiratory"
                            },
                            {
                                "id":"lbl_cl_6286995",
                                "name":"Skin, soft tissue and breast"
                            }
                        ]
                    }
                ]
            }
        ]
    }
    </script>
</body>

</html>